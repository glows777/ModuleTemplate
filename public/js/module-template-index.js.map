{"version":3,"sources":["src/module-template-index.js"],"names":["ModuleTemplate","$formObj","$","$statusToggle","validateRules","login","identifier","rules","type","prompt","globalTranslate","mod_ct_ValidateUrlEmpty","initialize","window","addEventListener","checkToggle","initializeForm","checkbox","applyConfigurationChanges","api","url","Config","pbxUrl","on","successTest","response","Object","keys","length","result","toUpperCase","onSuccess","cbBeforeSendForm","settings","data","form","cbAfterSendForm","Form","globalRootUrl","document","ready"],"mappings":";;AAAA;;;;;;;;AAQA;AACA,IAAMA,cAAc,GAAG;AACtBC,EAAAA,QAAQ,EAAEC,CAAC,CAAC,uBAAD,CADW;AAEtBC,EAAAA,aAAa,EAAED,CAAC,CAAC,uBAAD,CAFM;AAGtBE,EAAAA,aAAa,EAAE;AACdC,IAAAA,KAAK,EAAE;AACNC,MAAAA,UAAU,EAAE,OADN;AAENC,MAAAA,KAAK,EAAE,CACN;AACCC,QAAAA,IAAI,EAAE,OADP;AAECC,QAAAA,MAAM,EAAEC,eAAe,CAACC;AAFzB,OADM;AAFD;AADO,GAHO;AActBC,EAAAA,UAdsB;AAAA,0BAcT;AACZC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,qBAAxB,EAA+Cd,cAAc,CAACe,WAA9D;AACAf,MAAAA,cAAc,CAACe,WAAf;AACAf,MAAAA,cAAc,CAACgB,cAAf;AACA;;AAlBqB;AAAA;;AAmBtB;;;AAGAD,EAAAA,WAtBsB;AAAA,2BAsBR;AACb,UAAIf,cAAc,CAACG,aAAf,CAA6Bc,QAA7B,CAAsC,YAAtC,CAAJ,EAAyD,CACxD;AACA,OAFD,MAEO,CACN;AACA;AACD;;AA5BqB;AAAA;;AA6BtB;;;AAGAC,EAAAA,yBAhCsB;AAAA,yCAgCM;AAC3BhB,MAAAA,CAAC,CAACiB,GAAF,CAAM;AACLC,QAAAA,GAAG,YAAKC,MAAM,CAACC,MAAZ,+CADE;AAELC,QAAAA,EAAE,EAAE,KAFC;AAGLC,QAAAA,WAHK;AAAA,+BAGOC,QAHP,EAGiB;AACrB;AACA,mBAAOC,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,MAAtB,GAA+B,CAA/B,IAAoCH,QAAQ,CAACI,MAAT,CAAgBC,WAAhB,OAAkC,SAA7E;AACA;;AANI;AAAA;AAOLC,QAAAA,SAPK;AAAA,+BAOO,CAEX;;AATI;AAAA;AAAA,OAAN;AAWA;;AA5CqB;AAAA;AA6CtBC,EAAAA,gBA7CsB;AAAA,8BA6CLC,QA7CK,EA6CK;AAC1B,UAAMJ,MAAM,GAAGI,QAAf;AACAJ,MAAAA,MAAM,CAACK,IAAP,GAAclC,cAAc,CAACC,QAAf,CAAwBkC,IAAxB,CAA6B,YAA7B,CAAd;AACA,aAAON,MAAP;AACA;;AAjDqB;AAAA;AAkDtBO,EAAAA,eAlDsB;AAAA,+BAkDJ;AACjBpC,MAAAA,cAAc,CAACkB,yBAAf;AACA;;AApDqB;AAAA;AAqDtBF,EAAAA,cArDsB;AAAA,8BAqDL;AAChBqB,MAAAA,IAAI,CAACpC,QAAL,GAAgBD,cAAc,CAACC,QAA/B;AACAoC,MAAAA,IAAI,CAACjB,GAAL,aAAckB,aAAd;AACAD,MAAAA,IAAI,CAACjC,aAAL,GAAqBJ,cAAc,CAACI,aAApC;AACAiC,MAAAA,IAAI,CAACL,gBAAL,GAAwBhC,cAAc,CAACgC,gBAAvC;AACAK,MAAAA,IAAI,CAACD,eAAL,GAAuBpC,cAAc,CAACoC,eAAtC;AACAC,MAAAA,IAAI,CAACzB,UAAL;AACA;;AA5DqB;AAAA;AAAA,CAAvB;AA+DAV,CAAC,CAACqC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAM;AACvBxC,EAAAA,cAAc,CAACY,UAAf;AACA,CAFD","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\n\n/* global globalRootUrl,globalTranslate, Form, Config */\nconst ModuleTemplate = {\n\t$formObj: $('#module-template-form'),\n\t$statusToggle: $('#module-status-toggle'),\n\tvalidateRules: {\n\t\tlogin: {\n\t\t\tidentifier: 'login',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'empty',\n\t\t\t\t\tprompt: globalTranslate.mod_ct_ValidateUrlEmpty,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tinitialize() {\n\t\twindow.addEventListener('ModuleStatusChanged', ModuleTemplate.checkToggle);\n\t\tModuleTemplate.checkToggle();\n\t\tModuleTemplate.initializeForm();\n\t},\n\t/**\n\t * Отслеживание состояния переключателя статуса модуля\n\t */\n\tcheckToggle() {\n\t\tif (ModuleTemplate.$statusToggle.checkbox('is checked')) {\n\t\t\t// Модуль включен\n\t\t} else {\n\t\t\t// Модуль отключен\n\t\t}\n\t},\n\t/**\n\t * Применение настроек модуля после изменения данных формы\n\t */\n\tapplyConfigurationChanges() {\n\t\t$.api({\n\t\t\turl: `${Config.pbxUrl}/pbxcore/api/modules/ModuleTemplate/reload`,\n\t\t\ton: 'now',\n\t\t\tsuccessTest(response) {\n\t\t\t\t// test whether a JSON response is valid\n\t\t\t\treturn Object.keys(response).length > 0 && response.result.toUpperCase() === 'SUCCESS';\n\t\t\t},\n\t\t\tonSuccess() {\n\n\t\t\t},\n\t\t});\n\t},\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = ModuleTemplate.$formObj.form('get values');\n\t\treturn result;\n\t},\n\tcbAfterSendForm() {\n\t\tModuleTemplate.applyConfigurationChanges();\n\t},\n\tinitializeForm() {\n\t\tForm.$formObj = ModuleTemplate.$formObj;\n\t\tForm.url = `${globalRootUrl}module-template/save`;\n\t\tForm.validateRules = ModuleTemplate.validateRules;\n\t\tForm.cbBeforeSendForm = ModuleTemplate.cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = ModuleTemplate.cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n};\n\n$(document).ready(() => {\n\tModuleTemplate.initialize();\n});\n\n"],"file":"module-template-index.js"}